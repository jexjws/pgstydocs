---
title: FerretDB
description: Mongo Wire Compatible PostgreSQL
icon: Citrus
---

[FerretDB](https://www.openhalo.org/) is an open-source MongoDB wire protocol compatible middleware that allows you to use PostgreSQL as a drop-in replacement for MongoDB.
It enables applications that rely on MongoDB's wire protocol to work seamlessly with PostgreSQL, providing a bridge between the two databases.

To enable FerretDB, you'll need the FerretDB patched [`documentdb`](https://ext.pgsty.com/e/documentdb) extension, which is also available in the Pigsty repository.
The latest combo is FerretDB 2.4 and DocumentDB 0.105.0.


------

## Get Started

Use Pigstyâ€™s [**standard installation process**](/install/start/) with the [`mongo`](https://github.com/pgsty/pigsty/blob/main/conf/mongo.yml) configuration template.

```bash
./configure -c mongo    # Use FerretDB / DocumentDB config template
./install.yml           # Install, for production deployment please modify passwords in pigsty.yml first
```

For production deployment, please ensure to modify the password parameters in the `pigsty.yml` configuration file before running the installation playbook.


------

## Configuration

```yaml
pg-meta:
  hosts:
    10.10.10.10: { pg_seq: 1, pg_role: primary }
  vars:
    pg_cluster: pg-meta
    pg_users:
      - { name: mongod      ,password: DBUser.Mongo  ,pgbouncer: true ,roles: [dbrole_admin   ] ,comment: ferretdb super user ,superuser: true }
      - { name: dbuser_meta ,password: DBUser.Meta   ,pgbouncer: true ,roles: [dbrole_admin   ] ,comment: pigsty admin user }
      - { name: dbuser_view ,password: DBUser.Viewer ,pgbouncer: true ,roles: [dbrole_readonly] ,comment: read-only viewer  }
    pg_databases:
      - {name: meta, owner: mongod ,baseline: cmdb.sql ,comment: pigsty meta database ,schemas: [pigsty] ,extensions: [ documentdb, postgis, vector, pg_cron, rum ]}
    pg_hba_rules:
      - { user: dbuser_view , db: all ,addr: infra ,auth: pwd ,title: 'allow grafana dashboard access cmdb from infra nodes' }
      - { user: mongod      , db: all ,addr: world ,auth: pwd ,title: 'mongodb password access from everywhere' }
    node_crontab: [ '00 01 * * * postgres /pg/bin/pg-backup full' ] # make a full backup every 1am

    # DocumentDB Settings
    pg_extensions: [ documentdb, citus, postgis, pgvector, pg_cron, rum ]
    pg_libs: 'pg_documentdb, pg_documentdb_core, pg_cron, pg_stat_statements, auto_explain'  # add timescaledb to shared_preload_libraries
    pg_parameters: { cron.database_name: meta }
```


------

## Usage

Check the [FERRET](/ferret) docs for the details.